!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){a("./main"),a("./controllers/fotos-controller"),a("./controllers/foto-controller"),a("./controllers/grupos-controller"),a("./controllers/login-controller"),a("./directives/minhas-diretivas"),a("./services/meus-servicos"),a("./services/token-interceptor")},{"./controllers/foto-controller":2,"./controllers/fotos-controller":3,"./controllers/grupos-controller":4,"./controllers/login-controller":5,"./directives/minhas-diretivas":6,"./main":7,"./services/meus-servicos":8,"./services/token-interceptor":9}],2:[function(a,b,c){angular.module("alurapic").controller("FotoController",function(a,b,c,d){a.foto={},a.mensagem="",c.fotoId&&b.get({fotoId:c.fotoId},function(b){a.foto=b},function(b){console.log(b),a.mensagem="Não foi possível obter a foto"}),a.submeter=function(){a.formulario.$valid&&d.cadastrar(a.foto).then(function(b){a.mensagem=b.mensagem,b.inclusao&&(a.foto={})}).catch(function(b){a.mensagem=b.mensagem})}})},{}],3:[function(a,b,c){angular.module("alurapic").controller("FotosController",function(a,b){a.fotos=[],a.filtro="",a.mensagem="",b.query(function(b){a.fotos=b},function(a){console.log(a)}),a.remover=function(c){b.delete({fotoId:c._id},function(){var b=a.fotos.indexOf(c);a.fotos.splice(b,1),a.mensagem="Foto "+c.titulo+" removida com sucesso!"},function(b){console.log(b),a.mensagem="Não foi possível apagar a foto "+c.titulo})}})},{}],4:[function(a,b,c){angular.module("alurapic").controller("GruposController",function(a,b){b.get("/v1/grupos").success(function(b){a.grupos=b}).error(function(a){console.log(a)})})},{}],5:[function(a,b,c){angular.module("alurapic").controller("LoginController",function(a,b,c,d){a.usuario={},a.autenticar=function(){var d=a.usuario;b.post("/autenticar",{login:d.login,senha:d.senha}).then(function(){c.path("/")},function(b){console.log(d.login),a.usuario={},a.mensagem="Login/Senha incorretos"})},a.logout=function(){delete d.sessionStorage.token,c.path("/")},a.check=function(){return d.sessionStorage.token}})},{}],6:[function(a,b,c){angular.module("minhasDiretivas",[]).directive("meuPainel",function(){var a={};return a.restrict="AE",a.transclude=!0,a.scope={titulo:"@",descricao:"@"},a.templateUrl="js/directives/meu-painel.html",a}).directive("minhaFoto",function(){var a={};return a.restrict="AE",a.scope={titulo:"@",url:"@"},a.template='<img width="100%" height="100%" src="{{url}}" alt="{{titulo}}">',a}).directive("meuBotaoPerigo",function(){var a={};return a.restrict="E",a.scope={nome:"@",acao:"&"},a.template='<button class="btn btn-danger btn-block" ng-click="acao()">{{nome}}</button>',a})},{}],7:[function(a,b,c){angular.module("alurapic",["minhasDiretivas","ngAnimate","ngRoute","ngResource","meusServicos"]).config(function(a,b,c){c.interceptors.push("tokenInterceptor"),a.when("/fotos",{templateUrl:"partials/principal.html",controller:"FotosController"}),a.when("/fotos/new",{templateUrl:"partials/foto.html",controller:"FotoController"}),a.when("/fotos/edit/:fotoId",{templateUrl:"partials/foto.html",controller:"FotoController"}),a.when("/login",{templateUrl:"partials/login.html",controller:"LoginController"}),a.otherwise({redirectTo:"/fotos"})})},{}],8:[function(a,b,c){angular.module("meusServicos",["ngResource"]).factory("recursoFoto",function(a){return a("/v1/fotos/:fotoId",null,{update:{method:"PUT"}})}).factory("cadastroDeFotos",function(a,b){var c={};return c.cadastrar=function(c){return b(function(b,d){c._id?a.update({fotoId:c._id},c,function(){b({mensagem:"Foto "+c.titulo+" atualizada com sucesso",inclusao:!1})},function(a){console.log(a),d({mensagem:"Não foi possível atualizar a foto "+c.titulo})}):a.save(c,function(){b({mensagem:"Foto "+c.titulo+" incluída com sucesso",inclusao:!0})},function(a){console.log(a),d({mensagem:"Não foi possível incluir a foto "+c.titulo})})})},c})},{}],9:[function(a,b,c){angular.module("alurapic").factory("tokenInterceptor",function(a,b,c){var d={};return d.request=function(a){return a.headers=a.headers||{},b.sessionStorage.token&&(console.log("Enviando token já obtido em cada requisição"),a.headers["x-access-token"]=b.sessionStorage.token),a},d.response=function(a){var c=a.headers("x-access-token");return null!=c&&(b.sessionStorage.token=c,console.log("Token no session storage: ",c)),a},d.responseError=function(d){return null!=d&&401===d.status&&(console.log("Removendo token da sessão"),delete b.sessionStorage.token,c.path("/login")),a.reject(d)},d})},{}]},{},[1]);